<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>CrÃ©dito / ConfianÃ§a | Sistema de GestÃ£o</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- MENU SUPERIOR -->
<header class="topbar">
    <div class="logo">ğŸ¢ GestÃ£o</div>

    <nav class="main-menu">
        <a href="index.html">ğŸ </a>
        <a href="cadastro.html">ğŸ‘¤</a>
        <a href="estoque.html">ğŸ“¦</a>
        <a href="pedidos.html">ğŸ§¾</a>
        <a href="relatorios.html">ğŸ“‘</a>
    </nav>
</header>

<!-- LAYOUT -->
<div class="layout">

    <!-- SUBMENU -->
    <aside class="sidebar">
        <h3>Pedidos</h3>
        <a href="#">â• Novo Pedido</a>
        <a href="pedidos.html">ğŸ“‹ Lista de Pedidos</a>
        <a href="#">ğŸ”’ Caixa / Recebimentos</a>
        <a href="#" class="active">ğŸ’³ CrÃ©dito / ConfianÃ§a</a>
    </aside>

    <!-- CONTEÃšDO -->
    <main class="content">
        <h2>CrÃ©dito / ConfianÃ§a</h2>

        <!-- FILTROS -->
        <div class="filters">
            <input type="text" placeholder="Cliente">
            <select>
                <option>Status do CrÃ©dito</option>
                <option>Aguardando AnÃ¡lise</option>
                <option>Aprovado</option>
                <option>Rejeitado</option>
            </select>
            <button>Filtrar</button>
        </div>

        <!-- TABELA DE PEDIDOS COM CRÃ‰DITO -->
        <table class="table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Cliente</th>
                    <th>Total Pedido</th>
                    <th>Limite DisponÃ­vel</th>
                    <th>Status</th>
                    <th>AÃ§Ãµes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>103</td>
                    <td>Carlos Lima</td>
                    <td>R$ 980,00</td>
                    <td>R$ 500,00</td>
                    <td><span class="status aberto" id="status-103">Aguardando AnÃ¡lise</span></td>
                    <td>
                        <button class="btn primary" onclick="abrirCredito(103)">Analisar</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </main>
</div>

<!-- MODAL DE CRÃ‰DITO -->
<div class="modal" id="modalCredito">
    <div class="modal-content">
        <h3>ğŸ’³ AnÃ¡lise de CrÃ©dito</h3>

        <p><strong>Cliente:</strong> <span id="clienteCredito">Nome Cliente</span></p>
        <p><strong>Total do Pedido:</strong> <span id="totalCredito">R$ 0,00</span></p>
        <p><strong>Limite DisponÃ­vel:</strong> <span id="limiteCredito">R$ 0,00</span></p>

        <label>DecisÃ£o</label>
        <select id="decisaoCredito">
            <option value="">Selecione</option>
            <option value="aprovado">Aprovado</option>
            <option value="rejeitado">Rejeitado</option>
        </select>

        <label>ObservaÃ§Ã£o</label>
        <textarea placeholder="ObservaÃ§Ã£o sobre a decisÃ£o"></textarea>

        <div class="modal-actions">
            <button class="btn primary" id="confirmarCredito">Confirmar</button>
            <button class="btn" id="fecharCredito">Cancelar</button>
        </div>
    </div>
</div>

<!-- JAVASCRIPT -->
<script>
    let pedidoCreditoAtual = null;

    function abrirCredito(idPedido) {
        pedidoCreditoAtual = idPedido;

        // Simula dados do pedido
        let cliente = "Carlos Lima";
        let total = "R$ 980,00";
        let limite = "R$ 500,00";

        document.getElementById("clienteCredito").textContent = cliente;
        document.getElementById("totalCredito").textContent = total;
        document.getElementById("limiteCredito").textContent = limite;

        document.getElementById("decisaoCredito").value = "";
        document.querySelector("#modalCredito textarea").value = "";

        document.getElementById("modalCredito").style.display = "flex";
    }

    document.getElementById("fecharCredito").onclick = () => {
        document.getElementById("modalCredito").style.display = "none";
    };

    document.getElementById("confirmarCredito").onclick = () => {
        const decisao = document.getElementById("decisaoCredito").value;
        if (!decisao) {
            alert("Selecione a decisÃ£o!");
            return;
        }

        const statusSpan = document.getElementById(`status-${pedidoCreditoAtual}`);
        if (decisao === "aprovado") {
            statusSpan.textContent = "Aprovado";
            statusSpan.className = "status pago";
        } else {
            statusSpan.textContent = "Rejeitado";
            statusSpan.className = "status aberto";
        }

        alert("DecisÃ£o registrada com sucesso!");
        document.getElementById("modalCredito").style.display = "none";
    };
</script>
