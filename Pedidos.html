<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Pedidos | Sistema de GestÃ£o</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- MENU SUPERIOR -->
<header class="topbar">
    <div class="logo">ğŸ¢ GestÃ£o</div>

    <nav class="main-menu">
        <a href="index.html">ğŸ </a>
        <a href="cadastro.html">ğŸ‘¤</a>
        <a href="estoque.html">ğŸ“¦</a>
        <a href="pedidos.html" class="active">ğŸ§¾</a>
        <a href="relatorios.html">ğŸ“‘</a>
    </nav>
</header>

<!-- LAYOUT -->
<div class="layout">

    <!-- SUBMENU -->
    <aside class="sidebar">
        <h3>Pedidos</h3>
        <a href="#">â• Novo Pedido</a>
        <a href="#" class="active">ğŸ“‹ Lista de Pedidos</a>
        <a href="#">ğŸ”’ Caixa / Recebimentos</a>
        <a href="#">ğŸ’³ CrÃ©dito / ConfianÃ§a</a>
    </aside>

    <!-- CONTEÃšDO -->
    <main class="content">

        <h2>Lista de Pedidos</h2>

        <!-- FILTROS -->
        <div class="filters">
            <input type="text" placeholder="Cliente">
            <select>
                <option>Status</option>
                <option>Aberto</option>
                <option>Aguardando Caixa</option>
                <option>Pago</option>
            </select>
            <button>Filtrar</button>
        </div>

        <!-- TABELA DE PEDIDOS -->
        <table class="table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Cliente</th>
                    <th>Data</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>AÃ§Ãµes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>101</td>
                    <td>JoÃ£o Silva</td>
                    <td>26/01/2026</td>
                    <td>R$ 250,00</td>
                    <td><span class="status aguardando" id="status-101">Aguardando Caixa</span></td>
                    <td>
                        <button class="btn" onclick="verPedido(101)">Ver</button>
    <button class="btn primary" onclick="abrirCaixa(101)">Receber</button>
    <button class="btn warning" onclick="solicitarCredito(101)">ğŸ’³ Solicitar CrÃ©dito</button>
                    </td>
                </tr>
                <tr>
                    <td>102</td>
                    <td>Maria Souza</td>
                    <td>26/01/2026</td>
                    <td>R$ 120,00</td>
                    <td><span class="status aberto" id="status-102">Aberto</span></td>
                    <td>
                        <button class="btn" onclick="verPedido(102)">Ver</button>
                        <button class="btn primary" onclick="abrirCaixa(102)">Receber</button>
                    </td>
                </tr>
                <tr>
                    <td>103</td>
                    <td>Carlos Lima</td>
                    <td>25/01/2026</td>
                    <td>R$ 980,00</td>
                    <td><span class="status aguardando" id="status-103">Aguardando Caixa</span></td>
                    <td>
                        <button class="btn" onclick="verPedido(103)">Ver</button>
                        <button class="btn primary" onclick="abrirCaixa(103)">Receber</button>
                    </td>
                </tr>
            </tbody>
        </table>

    </main>

</div>

<!-- MODAL CAIXA -->
<div class="modal" id="modalCaixa">
    <div class="modal-content">
        <h3>ğŸ”’ Recebimento de Pagamento</h3>

        <label>Senha do Caixa</label>
        <input type="password" placeholder="Digite a senha">

        <label>Forma de Pagamento</label>
        <select id="formaPagamento">
            <option value="">Selecione</option>
            <option value="dinheiro">Dinheiro</option>
            <option value="pix">PIX</option>
            <option value="cartao">CartÃ£o</option>
        </select>

        <div id="campoAut" style="display:none;">
            <label>AUT / Comprovante</label>
            <input type="text" placeholder="CÃ³digo AUT da mÃ¡quina ou PIX">
        </div>

        <label>ObservaÃ§Ã£o</label>
        <textarea placeholder="Opcional"></textarea>

        <div class="modal-actions">
            <button class="btn primary">Confirmar Recebimento</button>
            <button class="btn" id="fecharModal">Cancelar</button>
        </div>
    </div>
</div>

<!-- JAVASCRIPT -->
<script>
    let pedidoAtual = null; // armazena o pedido que estamos editando no modal

    function abrirCaixa(idPedido) {
        pedidoAtual = idPedido;
        document.getElementById("modalCaixa").style.display = "flex";

        // Limpa campos
        document.querySelector('#modalCaixa input[type="password"]').value = "";
        document.getElementById("formaPagamento").value = "";
        document.getElementById("campoAut").style.display = "none";
        document.querySelector("#campoAut input").value = "";
        document.querySelector("#modalCaixa textarea").value = "";
    }

    document.getElementById("fecharModal").onclick = () => {
        document.getElementById("modalCaixa").style.display = "none";
    };

    const formaPagamento = document.getElementById("formaPagamento");
    const campoAut = document.getElementById("campoAut");

    formaPagamento.onchange = () => {
        if (formaPagamento.value === "pix" || formaPagamento.value === "cartao") {
            campoAut.style.display = "block";
        } else {
            campoAut.style.display = "none";
            campoAut.querySelector("input").value = "";
        }
    };

    document.querySelector("#modalCaixa .btn.primary").onclick = () => {
        const senha = document.querySelector('#modalCaixa input[type="password"]').value.trim();
        const pagamento = formaPagamento.value;
        const aut = campoAut.querySelector("input").value.trim();

        if (!senha) { alert("Digite a senha do caixa!"); return; }
        if (!pagamento) { alert("Selecione a forma de pagamento!"); return; }
        if ((pagamento === "pix" || pagamento === "cartao") && !aut) { alert("Digite o AUT do comprovante!"); return; }

        // Atualiza o status do pedido
        const statusSpan = document.getElementById(`status-${pedidoAtual}`);
        statusSpan.textContent = "Pago";
        statusSpan.className = "status pago";

        alert("Pagamento registrado com sucesso!");
        document.getElementById("modalCaixa").style.display = "none";
    };

    // FunÃ§Ã£o simulada de ver pedido (vai abrir detalhe futuro)
    function verPedido(idPedido) {
        alert("Abrir detalhes do pedido #" + idPedido);
    }
</script>
function solicitarCredito(idPedido) {
    alert("CrÃ©dito solicitado para o pedido #" + idPedido + ". Agora aguarde anÃ¡lise.");
    // Aqui no futuro: envia solicitaÃ§Ã£o para anÃ¡lise de crÃ©dito
}

</body>
</html>
